# shellcheck shell=sh disable=SC2034 # Many variables set will be used in
                                     # ./configure but shellcheck doesn't know
                                     # that, hence: disable=SC2034

true  # Dummy command because shellcheck treats all directives before first
      # command as file-wide, and we only want to disable for one line.
      #
      # See: https://github.com/koalaman/shellcheck/wiki/Directive

# shellcheck disable=SC2154
depends_prefix="$(cd "$(dirname "$ac_site_file")/.." && pwd)"

cross_compiling=maybe
host_alias="@HOST@"
ac_tool_prefix="${host_alias}-"

if test -z "$with_boost"; then
  with_boost="$depends_prefix"
fi

if test -z "$enable_wallet" && test -n "@no_wallet@"; then
  enable_wallet=no
fi

RUST_TARGET="@rust_target@"
RUST_VENDORED_SOURCES="${depends_prefix}/vendored-sources"

if test "x@host_os@" = xdarwin; then
  BREW=no
  PORT=no
fi

PATH="${depends_prefix}/native/bin:${PATH}"
PKG_CONFIG="$(which pkg-config) --static"

# These two need to remain exported because pkg-config does not see them
# otherwise. That means they must be unexported at the end of configure.ac to
# avoid ruining the cache. Sigh.
export PKG_CONFIG_PATH="${depends_prefix}/share/pkgconfig:${depends_prefix}/lib/pkgconfig"
if test -z "@allow_host_packages@"; then
  export PKG_CONFIG_LIBDIR="${depends_prefix}/lib/pkgconfig"
fi

CPPFLAGS="-I${depends_prefix}/include/ ${CPPFLAGS}"

if test "x@host_os@" = xfreebsd; then
  LDFLAGS="-L${depends_prefix}/lib ${LDFLAGS} -static-libstdc++ -lcxxrt"
else
  LDFLAGS="-L${depends_prefix}/lib ${LDFLAGS} -static-libstdc++ -lc++abi"
fi

if test -n "@CC@" -a -z "${CC}"; then
  CC="@CC@"
fi
if test -n "@CXX@" -a -z "${CXX}"; then
  CXX="@CXX@"
fi
CCACHE="${depends_prefix}/native/bin/ccache"
PYTHONPATH="${depends_prefix}/native/lib/python3/dist-packages${PYTHONPATH:+${PATH_SEPARATOR}}${PYTHONPATH}"

if test -n "@AR@"; then
  AR="@AR@"
  ac_cv_path_ac_pt_AR="${AR}"
fi

if test -n "@RANLIB@"; then
  RANLIB="@RANLIB@"
  ac_cv_path_ac_pt_RANLIB="${RANLIB}"
fi

if test -n "@NM@"; then
  NM="@NM@"
  ac_cv_path_ac_pt_NM="${NM}"
fi

if test -n "@debug@"; then
  enable_reduce_exports=no
fi

if test -n "@CFLAGS@"; then
  CFLAGS="@CFLAGS@ ${CFLAGS}"
fi
if test -n "@CXXFLAGS@"; then
  CXXFLAGS="@CXXFLAGS@ ${CXXFLAGS}"
fi
if test -n "@CPPFLAGS@"; then
  CPPFLAGS="@CPPFLAGS@ ${CPPFLAGS}"
fi
if test -n "@LDFLAGS@"; then
  LDFLAGS="@LDFLAGS@ ${LDFLAGS}"
fi
